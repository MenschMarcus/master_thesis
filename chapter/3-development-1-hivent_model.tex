%!TEX root = ../masters_thesis.tex

\section{Hivent Model} % (fold)
\label{sec:hivent_model}

This section proposes the spatio-temporal \emph{Hivent model} to represent the history of countries in time and space. \emph{Hivent} is an acronym for \emph{\textbf{Hi}}storical e\emph{\textbf{vent}} and is the main element of the data model. In section \ref{sec:spatio_temporal_data_models}, different spatio-temporal data models were introduced: The \emph{Snapshot} model is unsuitable for the problem space. \emph{Simple time-stamping} is helpful to link countries to their history, but it does not explicitly model historical changes, which is required. For that purpose, the \emph{ESTDM} was developed, but since it only works for raster data, it does not match the problem space. The \emph{History Graph} model fills this gap and additionally introduces temporal changes and their influences on geographic entities directly in the model. Finally, the \emph{Three-Domain} model presents a helpful concept to separate the spatial, temporal and thematic dimension of a spatio-temporal object.

The Hivent model is constructed from components of some of these models. It is event-based and supports vector data. It is organized in four domains and allows to visualize data on a graph.
Section \ref{sub:elements} introduces the main elements of the Hivent model. Afterwards, the basic axioms and assumptions are defined in section \ref{sub:preconditions}. A major contribution of this thesis is proposed in section \ref{sub:hivent_operations}: the set of five \emph{Hivent operations} that describe all possible changes of countries in time and space.
Section \ref{sub:histograph} presents the \emph{HistoGraph}, a non-spatial visualization of historical developments.

% ------------------------------------------------------------------------------
\subsection{Elements} % (fold)
\label{sub:elements}

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\paragraph{Hivents} % (fold)
\label{par:hivent}

represent historically significant happenings, e.g.\ a treaty, bill or declaration.
An Hivent happens at one particular point in time and space and is therefore the main organizing element of the eponymic data model.
The focus in this work is on events that influence the geopolitical situation on Earth.

% paragraph hivent (end)

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\vspace{-1em}
\paragraph{Areas} % (fold)
\label{par:area}

represent one identical current or historical country. They are abstract entities on the map with a \emph{name} and a \emph{territory}. In the real world, a country has a common \emph{short name}, e.g.\ ``Germany'' and a potentially longer \emph{formal name}, e.g.\ ``Federal Republic of Germany''. Both attributes are part of the Area model. The \emph{territory} of the Area is described by a polypolygon, a set of weakly simple polygons to account for enclaves and exclaves (see section \ref{ssub:vector_model}). The polylines of a polygon consist of an ordered set of points that represent the borders of the country.

% paragraph area (end)

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\vspace{-1em}
\paragraph{Historical Changes} % (fold)
\label{par:historical_changes}

The idea of the Hivent model is that Areas can change over time. This happens via \emph{historical changes} that are part of exactly one Hivent. Throughout the lifetime of an Area, it is created at some point $t_s$, its territory and short name can change multiple times $t_i: t_s < t_i$ and at some point $t_e: t_s < \forall t_i < t_e$ it may be deleted.
Each Area is \emph{uniquely identified by its formal name}. That means as soon as the formal name of an Area changes, it is considered a ``new'' Area.
Since all changes in this model are sudden, there are only two possible states an Area can be in: It is \emph{active}, if at the current point in time it is historically existing, otherwise it is \emph{inactive}.

\begin{figure}[H]
  \vspace{1em}
  \centering
  \includegraphics[width=0.9\textwidth]{graphics/development/hivent_model/area_states}
  \caption{Three event types that change Areas, resulting in two different area states}
  \label{fig:area_states}
\end{figure}

Historical changes and Areas are mutually linked, i.e.\ an Area keeps references to the changes creating, updating and deleting it and a historical change stores a set old Areas that are deleted, a set of new Areas that are created and a set of update Areas that are manipulated in the change.

% paragraph historical_changes (end)

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\paragraph{Four-Domain model} % (fold)
\label{par:four_domain_model}

Following the idea of the Three-Domain model and its extension introduced in section \ref{sub:three_domain_model}, the Hivent model is as well organized by four domains that are modeled independently from each other:

\begin{compactitem}
  \item The \emph{semantic domain} holds the Area uniquely identifiable is represented by its formal name.
  \item The \emph{spatial domain} is expressed by the territory of the Area that is visible on the map.
  \item The \emph{thematic domain} is represented by the short name of the Area.
  \item The \emph{temporal domain} is the entirety of all historical changes associated with the Area.
\end{compactitem}

The main difference between the spatial and the thematic domain is that there is no relation between the names of two Areas. While the intention is questionable, there could potentially be two Areas active at the same time with the same name. The update of the name of one Area is independent from any other Area. This is not true for the spatial domain: The territories of two Areas are highly related to each other. Geospatially, each territory has at least one neighbor and two neighbors share the same border. An update of the territory of one Area results in the update of at least one other territory.

% paragraph four_domain_model (end)

% subsection section area (end)

% ------------------------------------------------------------------------------
\subsection{Preconditions} % (fold)
\label{sub:preconditions}

\begin{quoteit}
  In the beginning God created the heavens and the Earth \\
  Now the Earth was formless and empty [...] \\
  And God said, “Let there be light” --- and there was light.
\end{quoteit}
\hfill -- Genesis 1:1, The First Book of Moses, Old Testament
\vspace{1em}


There are five axioms and two assumptions the Hivent model is based on. The theoretical foundation is the model of the Earth and its curved surface that can be projected onto a two-dimensional map using a map projection, as introduced in sections \ref{sub:geospatial_data}.

\newtheorem{invariant_surface}[assicounter]{Axiom}
\begin{invariant_surface}
\label{axm:invariant_surface}
  The Earth's surface has an invariant area size, i.e.\ it does not change over time.
\end{invariant_surface}

\vspace{-2.0em}
\newtheorem{area_on_surface}[assicounter]{Axiom}
\begin{area_on_surface}
\label{axm:area_on_surface}
  Each Area in the spatio-temporal system is located directly on the surface of the Earth.
\end{area_on_surface}

These axioms set the spatial foundation of the system: a constant dimension of the map and Areas covering the map. The basis of the temporal part of the system is content of the following axioms:

\vspace{-1.0em}
\newtheorem{initial_configuration}[assicounter]{Axiom}
\begin{initial_configuration}
\label{axm:initial_configuration}
  The spatio-temporal system is initialized at $t_0$. At this initial state, exactly one Area exists. It is denoted by $\Omega$ and is referred to as the \emph{universe} Area. It has no name and its territory covers the whole surface of the Earth.
\end{initial_configuration}

\vspace{-2.0em}
\newtheorem{historical_change}[assicounter]{Axiom}
\begin{historical_change}
\label{axm:historical_change}
  At each point $t_i \geq t_0$, multiple historical changes can be introduced.
\end{historical_change}

\vspace{-2.0em}
\newtheorem{unique_coverage}[assicounter]{Axiom}
\begin{unique_coverage}
\label{axm:unique_coverage}
  At each point $t_i \geq t_0$, each point on the surface of the Earth is covered by exactly one territory of exactly one Area.
\end{unique_coverage}

As defined in section \ref{par:area}, a historical change can create, manipulate and delete Areas on the Earth's surface. According to axiom \ref{axm:unique_coverage}, each change introduced in the system must maintain the spatial integrity on the map, i.e.\ if an Area is created on the map, the Area claiming this territory before has to secede it.

Formally, it can be said that each change consists of three sets of Areas: the old Areas $A$ that are deleted, the new Areas $B$ that are created and the Areas $C$, whose properties are updated in the change. Each $A_i \in A$ and $B_i \in B$ has a territory $A_i^T$ respectively $B_i^T$. Each $C_i \in C$ has an old territory $C_i^{OT}$ that is updated with the new territory $C_i^{NT}$. Each change introduced in the spatio-temporal system must maintain the spatial integrity of axiom \ref{axm:unique_coverage}. Therefore, the total size of the territories before the change and after the change must be the same:

\vspace{-.5em}

\[
  \left|\bigcup\limits_{i=1}^n A_i^T\right|
  +
  \left|\bigcup\limits_{i=1}^n C_i^{OT}\right|
  ~=~
  \left|\bigcup\limits_{i=1}^n C_i^{NT}\right|
  +
  \left|\bigcup\limits_{i=1}^n B_i^T\right|
\]

\vspace{.5em}

This behavior is based on to the law of conservation of energy in physics: energy in a closed system can only be transformed from one form to another, from one object to another -- but the total energy in the system is preserved at any time. In this spatio-temporal system, the total size of the territory of the Earth is preserved, but it is distributed among the active Areas in the system.

The first changes introduced in the system at $t_0$ are the creation of all bodies of water, including the oceans and lakes, denoted as $W$. Each Area $W_i \in W$ is created with their name and territory cut out of $\Omega$. The result is that after $t_0$, the map is divided into water ($W$) and land ($\Omega$). Land can at any point in time be either \emph{claimed}, i.e.\ it is currently occupied by the territory of exactly one active Area, or \emph{unclaimed}, i.e.\ belonging to $\Omega$.
% It is a subtractive data model, because each new Areas territory is cut out of $\Omega$.

\begin{figure}[ht]
  \centering
  \includegraphics[width=0.6\textwidth]{graphics/development/hivent_model/init_map}
  \caption{The initial state of the world map at $t_0$}
  \label{fig:init_map}
\end{figure}

In the real world, the name of a country changes according to sudden events, e.g.\ a declaration or a governmental bill. The territory can change either because of geographical processes, e.g.\ the sea level rise influencing the coastlines, or according to a historical event, e.g.\ a treaty shifting a border between two countries. The Hivent model is based on two assumptions that simplify the model and keep the problem space clear:

\vspace{-0.0em}
\newtheorem{coastline_territory}[assicounter]{Assumption}
\begin{coastline_territory}
\label{axm:coastline_territory}
  The territory of a country stops at the coastline.
\end{coastline_territory}

\vspace{-1.5em}
\newtheorem{constant_coastlines}[assicounter]{Assumption}
\begin{constant_coastlines}
\label{axm:constant_coastlines}
  The coastlines have not changed over time.
\end{constant_coastlines}

Both assumptions are wrong. The territory of a country stretches into international water, as explained in section \ref{sub:territory_of_a_country}). Coastlines are constantly changing and so does the distribution of land and water on Earth. However, these assumptions allow the Hivent model to focus only on discrete historical changes. It is subject to future work to extend the model to account for long-term processes, e.g. the continental drifts of tectonic plates. For now, the temporal behavior of an Area in the Hivent model can be described as a \emph{static object that changes according to sudden events}.

% subsection preconditions (end)

% ------------------------------------------------------------------------------
\subsection{Hivent Operations} % (fold)
\label{sub:hivent_operations}

Respecting the preconditions, there are several different types of historical changes that transform a set of old Areas $A$ to a set of new Areas $B$ and update a set of Areas $C$. However, each possible historical change can be expressed with only one of five \emph{Hivent operations}. Four of them change the identity of at least one Area and therefore establish historical predecessor-successor-relationships. These relationships are always symmetric, i.e.\ if one old Area is replaced by one new Area, the old Area is the historical predecessor of the new Area and vice versa. The last operation changes a non-spatial property of an Area and is therefore identity-preserving.

\newpage
\begin{description}

  \item[UNI -- Unification]
  A set of old Areas unifies to one new Area. The old Areas are deleted, becoming the historical predecessors of the new Area. The territory of this new Area is the union of the territories of the old Areas. The new Area receives a new name. \\[0.25em]
  \begin{footnotesize}
    In 1922, the Russian SFSR, the Transcaucasian SFSR, the Ukrainian SSR and the Byelorussian SSR unified and formed the Union of Soviet Socialist Republics (USSR).
  \end{footnotesize}

  \item[INC -- Incorporation]
  One or more old Areas are incorporated into another Area that stays active. Its territory is enlarged by the union of the territories of the old Areas. The old Areas are historical predecessors of the Area that stays active. \\[0.25em]
  \begin{footnotesize}
    In 1990, the territory of the German Democratic Republic (East Germany) became part of the Federal Republic of Germany (West Germany). Although this event is known as the \emph{German Reunification}, it is historically an incorporation of East Germany into West Germany \cite{incorporationEastWestGermany}.
  \end{footnotesize}

  \item[SEP -- Separation]
  As the inverse of unification, one old Area is separated into multiple new Areas. Each new Area gets a part of the territory of the old Area, receives a new name, and has the old Area as its only historical predecessor. \\[0.25em]
  \begin{footnotesize}
    In 1993, the Czech and Slovak Federal Republic, commonly known as Czechoslovakia, dissolved into present-day Czech Republic and Slovak Republic, creating two new countries out of one old.
  \end{footnotesize}

  \item[SEC -- Secession]
  As the inverse of incorporation, one or more new Areas are ceded from a previously existing Area that stays active. Each new Area gets a new name, receives the previously existing Area as the only historical predecessor and a part of its territory. \\[0.25em]
  \begin{footnotesize}
    In 2008, the Republic of Kosovo declared independence from Serbia and has since then partially received international recognition. Serbia stays a country, keeping its name, but ceding a part of its territory to Kosovo.
  \end{footnotesize}

  \item[NCH -- Name Change]
  An Area changes its short name but preserves its formal name and identity. \\[0.25em]
  \begin{footnotesize}
    A recent change happened on 05.05.2016: The cabinet of Czech Republic approved that the country will now officially be called ``Czechia''. However, the formal name stays ``Czech Republic'', which preserves its identity.
  \end{footnotesize}
\end{description}

\vspace{1.5em}
\begin{table}[H]
\begin{center}
\begin{tabular}{cx{2.5cm} cx{2.5cm} cx{2.5cm} cx{2.5cm} cx{2.5cm}}

  \texttt{UNI} & \texttt{INC} & \texttt{SEP} & \texttt{SEC} & \texttt{NCH} \\
  Unification & Incorporation & Separation & Secession & Name Change \\[1em]

  \includegraphics{graphics/development/hivent_model/operations/UNI} &
  \includegraphics{graphics/development/hivent_model/operations/INC} &
  \includegraphics{graphics/development/hivent_model/operations/SEP} &
  \includegraphics{graphics/development/hivent_model/operations/SEC} &
  \includegraphics{graphics/development/hivent_model/operations/NCH} \\

\end{tabular}
\caption{The five Hivent operations}
\label{tab:hivent_operations}
\end{center}
\end{table}

% subsection hivent_operations (end)

% ------------------------------------------------------------------------------
\subsection{HistoGraph} % (fold)
\label{sub:histograph}

Based on the idea of the History Graph model, introduced in section \ref{fig:history_graph_model}, the linguistically and conceptually related \emph{HistoGraph} visualizes the temporal development of countries. The edges of the graph represent an Area, the nodes a Hivent operation. The graph shows the predecessor-successor-relationships between Areas. As previously explained in section \ref{par:historical_changes}, an Area keeps references to the historical changes creating, updating and ceasing it. These changes themselves are linked to their old and new Areas. Therefore, each Area indirectly knows their successors and predecessors. The two-dimensional HistoGraph has a horizontal orientation. The x-axis refers to one point in time, the y-axis has no spatio-temporal relation. The graph uses the visualization approach of the five Hivent operations in table \ref{tab:hivent_operations}, including the following symbols:

\begin{table}[H]
\begin{center}
\begin{tabular}{c l l}

  \raisebox{3.5\height}

  \raisebox{-0.2\height}
  {\includegraphics[width=10px]{graphics/development/hivent_model/histograph/circle_filled}}
  & Identity-changing Hivent operation
  & \texttt{UNI}, \texttt{INC}, \texttt{SEP}, \texttt{SEC} \\

  \raisebox{-0.2\height}
  {\includegraphics[width=10px]{graphics/development/hivent_model/histograph/circle_unfilled}}
  & Identity-preserving Hivent operation
  & \texttt{NCH} \\

  \raisebox{-0.2\height}
  {\includegraphics[width=10px]{graphics/development/hivent_model/histograph/circle_combo}}
  & A combination of both
  & e.g.\ \texttt{INC + NCH}

\end{tabular}
\label{tab:histograph_symbols}
\end{center}
\end{table}

\vspace{-2.5em}

Each uninterrupted horizontal line refers exactly to one Area. If a horizontal line leads straight through a circle, the identity of the Area is preserved in the operation. New Areas resulting from an identity-changing Hivent operation emerge from the circle with a vertical line, indicating a sudden change with a duration of zero. From this line, the new Areas branch out right-angled. The HistoGraph is created from one particular reference Area. It visualizes historically related Areas in one direction: Into the past, it recursively plots only the predecessors on the graph, but not the successors of the predecessors. Into the future, the successors of the reference Area are plotted recursively, but not their predecessors.
The behavior of the HistoGraph is shown in figure \ref{fig:example_germany} at the example of present-day Germany and its state history since the end of World War II. This history is driven by six historical events, which provide examples for all five Hivent operations. They are listed in table \ref{tab:german_history_since_1945}.

\begin{figure}[ht]
  \vspace{0.5em}
  \centering
  \includegraphics[width=0.9\textwidth]{graphics/development/hivent_model/histograph/example_germany}
  \caption{The concept of the HistoGraph at the example of Germany's history since 1945}
  \label{fig:example_germany}
\end{figure}


\begin{table}[ht]
\begin{center}
\begin{tabular}{l p{8.8cm} l}
  \toprule
  Hivent date & Hivent description & Hivent operations \\
  \midrule

    05.06.1945
  & \normalsize{In the Berlin Declaration the total dissolution of the Third Reich is confirmed. It separates into multiple parts, returning the territories annexed by the German Reich in World War II. The rest is controlled by the British, French, American and Soviet occupation zone.}
  & \texttt{SEP} \\[1.5em]

    16.02.1946
  & \normalsize{The Saar Protectorate is entangled from the French Zone of Occupation Germany, creating an own country.}
  & \texttt{SEC} \\[1.5em]

    28.05.1949
  & \normalsize{The Federal Republic of Germany (West Germany) is created from the British, American and French Zone of Occupation.}
  & \texttt{UNI} \\[1.5em]

    07.10.1949
  & \normalsize{The German Democratic Republic (East Germany) is created from the Soviet Zone of Occupation.}
  & \texttt{UNI} \\[1.5em]

    01.01.1957
  & \normalsize{The Saar Treaty (``Little Reunification'') joins the Saar Protectorate as the federal state ``Saarland'' in West Germany.}
  & \texttt{INC} \\[1.5em]

    03.10.1990
  & \normalsize{In the German Reunification, East joins West Germany. The Federal Republic of Germany is now called ``Germany''.}
  & \texttt{INC + NCH} \\[1.5em]

  \bottomrule
\end{tabular}
\caption{Historical events in German state history since 1945}
\label{tab:german_history_since_1945}
\end{center}
\end{table}

This example hosts a special case: In October 1949, East Germany was created from the Soviet Zone of Occupation. Both Areas have the same territory, but a different short and formal name. A \texttt{NCH} cannot be performed, because the identity is not preserved: the German Democratic Republic is a new Area. However, the change can be described by a \texttt{UNI} of only one old Area (Soviet zone), creating a new Area (East Germany). This new Area occupies exactly the same territory as the old Area and becomes the only historical successor of the old Area.

The graph plots Germany first. Since it does not have any successors, the plot expands only one way, historically backwards: East Germany and the Saar Protectorate were incorporated into Germany, so they are plotted. They emerged from the four post-war occupation zones, which are visualized in the next step. Each of the four occupation zones originated themselves from the German Reich. However, the German Reich dissolved into many more Areas, e.g.\ the Memel territory. They are not included in the graph, because they are not predecessors of any Area that is a recursive predecessor of present-day Germany.

Many problems of the graph visualization are apparent in this example: Circles may overlap if many operations happen in a short period of time -- in this case between 1945 and 1949.
The name ``West Germany'' collides with the vertical line indicating the incorporation of the Saar Protectorate, which should also be avoided.
Additionally, the names of the Areas of the four post-war occupation zones cannot be shown in the graph, due to lack of space.
One more important aspect can be seen in the foundation of West Germany in 1949: A \texttt{UNI} operation unifies three old Areas to one new Area. This could be visualized symmetrically with a straight line from the midmost incoming Area line into the circle to the outgoing Area line of the new Area. However, this would give the wrong impression that this midmost Area had the same identity as the newly created Area. In general, the circle for \texttt{UNI} and \texttt{SEP} operations with an odd number of old respectively new Areas must be displaced off the center to emphasize that the identity has changed.
All these issues are beyond the scope of this thesis and subject to future work in the field of Information Visualization.

% subsection histograph (end)

% section hivent_model (end)
%!TEX root = ../masters_thesis.tex

\chapter{Concept} % (fold)
\label{cha:concept}

The problem space of this thesis is how to model, visualize and edit the development of countries in time and space in a HGIS. The first section of this chapter explains the spatio-temporal data model developed in this thesis and the related concepts of an  \emph{Hivent} and an \emph{Area}. It shows ten \emph{Historical Geographic Operations} that represent all kinds of changes that can happen in the development of a country. The second section introduces \emph{HistoGlobe}, the application used in this thesis. The chapter finishes with the \emph{EditMode} and the \emph{HistoGraph} as interface extensions to HistoGlobe to visualize and edit historical changes of countries.


% ==============================================================================
\section{Hivent Model} % (fold)
\label{sec:hivent_model}

In section \ref{sec:spatio_temporal_data_models}, different spatio-temporal data models were introduced. The \emph{Snapshot Model}  was seen as unsuitable for the problem space. \emph{Simple Time-Stamping} is helpful to link countries to their history, but not explicitly model historical changes. The idea of the \emph{Event-Based Spatio-Temporal Data Model} fits the problem space well, but since it only works for raster data, it is also not suitable for this thesis. The \emph{Three-Domain Model} introduces a helpful concept to separate the spatial, temporal and thematic dimension of a spatio-temporal entity. The temporal changes introduced in the \emph{History Graph Model} allow to model historical changes and their influences on geographic entities. The \emph{Hivent Model} introduced in this thesis is constructed from components of some of these models.


% ------------------------------------------------------------------------------
\subsection{Area} % (fold)
\label{sub:area}

The main entity of the domain is a country, may it be historical or current. But since the model can easily be extended to model the history of states, provinces, regions or islands, the model is built on the abstract concept of an \emph{Area}. It represents one identical political entity and has two attributes:

\begin{enumerate}
  \item An \emph{area name} consisting of a \emph{short name}, e.g. ``Germany'', and a \emph{formal name}, e.g. ``Federal Republic of Germany''.
  \item An \emph{area territory} describing the spatial extension of the Area using a polypolygon, a set of weakly simple polygons, because it has to support enclaves and exclaves. The polylines of the polygons represent the borders of the Area.
  % Additionally, there is a \emph{representative point} for the territory at which the name of the area will be displayed on the map.
\end{enumerate}

The area name changes according to sudden events, e.g. a declaration or a governmental bill. The territory of a political entity can change either because of a geographical processes, e.g. the change of the coastline, or according to a historical event, e.g. a treaty. The model in this thesis focuses only on discrete historical changes and not on long-term geographical developments. It is assumed that the geographical conditions on Earth, especially the position of land and water and the coastlines have not changed in history. While this assumption is obviously wrong, it helps to keep the problem space clear. The data model will be open to future extensions to account also for geographic changes. In this data model, the temporal behavior of an Area can therefore be described as a \emph{static object that changes according to sudden events}.

% TODO: countries with enclaves or islands are not topologically equivalent.

% subsection area (end)
% ------------------------------------------------------------------------------

\subsection{Hivent} % (fold)
\label{sub:hivent}

These sudden geopolitical changes result from historically significant happenining, e.g. a treaty, bill or declaration. In this data model, these events introducing historical changes to Areas are called \emph{Hivents} (\emph{\textbf{Hi}}storical e\emph{\textbf{vents}}). An Hivent has four different attributes:

\begin{compactenum}
  \item The \emph{name} of the Hivent
  \item The point in time, identified by the Hivent \emph{date}.
  \item A textual description of the Hivent \emph{location}.
  \item The \emph{historical changes} resulting from the Hivent.
\end{compactenum}

The Hivent is the central element of the \emph{Hivent Model}, because it drives the changes to the Area.

% subsection hivent (end)

% ------------------------------------------------------------------------------
\subsection{Historical Changes} % (fold)
\label{sub:historical_changes}

Before the changes that can happen to an Area can be introduced, the question of the \emph{identity} of an area has to be answered: What identifies an Area uniquely?

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\paragraph{Area identity} % (fold)
\label{par:area_identity}

Given the example of Germany, the Area is independent from both its territory and short name: In 1949, four years after the end of World War II, the German Democratic Republic (\emph{East Germany}) and the Federal Republic of Germany (\emph{West Germany}) were created. In 1957, the Saar Protectorate (\emph{Saarland}) joined West Germany. Although the territory of the Area has changed, it is still the same Area. In 1990, East and West Germany reunited to what is currently known as Germany. This Germany is still the Federal Republic of Germany, so it is juristically the same as West Germany before 1990. That means that also the short name of an Area can change (West Germany to Germany) without affecting the identity of the Area.

This model uses the formal name of an Area as its identifying attribute. That means, the short name can change, but as soon as the formal name of an area changes (e.g. German Empire to Federal Republic of Germany), it is considered a ``new'' Area.

Throughout the lifetime of an Area, it is created at some point, then its territory and short name can change any number of times and at some point it ceased. Since all changes in this model are sudden, there are only two possible states an Area can be in:
\begin{compactenum}
  \item An Area is \emph{active}, if at the current time point it is historically existing, with a name and a territory associated to it.
  \item On a contrarty, if an Area does not historically exist at this time point, it is \emph{inactive}.
\end{compactenum}

% paragraph area_identity (end)

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\paragraph{Preconditions} % (fold)
\label{par:preconditions}

The data model only represents sudden changes of Areas, no processes, i.e. changes with duration. The model also assumes that coastlines never changed. Additionally to these two constraints, it is assumed that the surface of the Earth is divided into two types surfaces: unlivable \emph{water} and inhabitable \emph{land}. Land can at any point in time be either \emph{claimed}, i.e. it is currently the territory of exactly one active Area, or on a contrary be \emph{unclaimed}.

% paragraph preconditions (end)

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\paragraph{Historical Geographic Operations} % (fold)
\label{par:historical_geographic_operations}

There are ten different types of changes that can happen to an Area. They can be classified by the number of Areas they affect and by the fact if they change the identity of an Area or not.

\begin{enumerate}
  \item Identity-changing operations for one Area
  \begin{description}
    \item[CRE -- Creation]
    A new Area gets created with a territory fully on previously unclaimed land. \\
    The Roman Kingdom (753 - 509 B.C.) was created in Latinum, today central Italy, in a region that did not have anything before which would be considered a political entity
    \item[ICH -- Identity Change]
    The formal name of an Area changes, therefore the old Area is destructed and a new Area with the same territory is created. \\
    In the end of the Cold War, the Polish People's Republic (1952-1989) got renamed to present-day Republic of Poland (since 1989). Although the short name (Poland) stayed, the new country is a new political entity and is therefore to be modeled a new Area.
    \item[DES -- Destruction]
    gfdas
  \end{description}
  \item Identity-changing operations for two or more Area
  \begin{description}
    \item[UNI -- Unification]
    jhzfd
    \item[INC -- Incorporation]
    jhtrgf
    \item[SEP -- Separation]
    jthrgfe
    \item[SEC -- Secession]
    jzhtrgf
  \end{description}
  \item Identity-preserving operations for one or more Areas
  \begin{description}
    \item[TCH -- Territory Change]
    jtgf
    \item[BCH -- Border Change]
    zhrf
    \item[NCH -- Name Change]
    jhtre
  \end{description}
\end{enumerate}


% paragraph historical_geographic_operations (end)

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

There are topological rules rules that can be applied, e.g. two neighboring countries (polygons) share one common border (polyline). That preserves the relationship between them if their common border changes.

MECE principle: Mutually Exclusive and Collectively Exhaustive


A data model is an incomplete abstraction of the real world to develop a reasonable solution for the problem space.
Since the data model uses the concept of several existing one, it will derive also its name from it: The Hivent-Based Three-Domain Spatio-Temporal History Graph Data Model for Time-Stamped Vector Geometry
... or in short: HBTDSTHGDMTSVG

estd for vector graphics

3 domain model
identity: formal name of an entity

history graph model without changing state: active, inactive

simplification: just active / inactive, normal / contested + level of certainty

no transaction time, only valid / event time
only world time is regarded, not database time.


interior borders of countries, which are straight lines between manually defined border points.
=> vector model

A main problem is to maintain the integrity of the spatial topology when a new change gets inserted not at the end of the list. A simple example shows that problem: Given geo-object $X$ is part of the inital base configuration at change $t_b$. At a later change, e.g. $t_y$ $X$ gets replaced by object $Y$. If a new change that updates $X$ to $X'$ gets inserted before at time point $t_x < t_y$, then $t_y$ is not integer anymore, because object $X$ does not exist. That is why on insertion of a change, all succeeding changes have to be tested for integrity and it might be necessary to update later changes.

% \begin{figure}[ht]
%   \centering
%   \includegraphics[width=0.8\textwidth]{graphics/basics/stdm/event-based_spatio-temporal_data_model}
%   \caption{The Event-Based Spatio-Temporal Data Model}
%   \label{fig:event-based_spatio-temporal_data_model}


\paragraph{possible extension} % (fold)
\label{par:possible_extension}

% paragraph possible_extension (end)

-> the whole earth is 100\% covered by spatial objects (full topology)
  countries, debated territories, unknown land, water
  Newtons concept of absolute space?


inclusion of universe $\Omega$:
CRE = SEC from $\Omega$
DES = INC into $\Omega$

% subsection historical_changes (end)


% section hivent_model (end)


store Hivents in DoublyLinkedList


% \subsection{Four-Domain Model}
\label{sub:four_domain_model}

According to the extension of the Three Domain model (see section \ref{sub:three_domain_model}), a spatio-temporal object can be represented separetely in the spatial, temporal and thematic domain. Additionally, the semantic domain uniquely identifies an object and is invariant. This applies to the concept of an Area that represents a country.


id: formal name

semantic: id (formal name)
spatial:  spatial attributes (territory)
temporal: Hivent -> HistoricalChange -> AreaChange
thematic: aspatial attributes (short name)

% subsection four_domain_model (end)

% ==============================================================================
\section{HistoGlobe} % (fold)
\label{sec:histoglobe}

Application: HistoGlobe
A distributed \emph{Web Information System}, consists of a remote server side, on which the storage and management of the actual data happens, and the client side on which the user communicates with the system. It hosts the user interface that is rendered in a Web browser.

map for spatial domain (x, y)
timeline for temporal domain (t)
-> 3D system

describe the components of the HG explicitally

ancestors successors
layers of administrative units
open to extension for additional attribute data (e.g. statistics)

requirements
  geographical knowledge
  contextualize / intersect historical sources
  accept imprecision
  prevent illusion of certainty

usable User Interface for both navigation and editing
-> problem: all interfaces are trés horrible!



% ------------------------------------------------------------------------------
\subsection{System Architecture} % (fold)
\label{sub:system_architecture}

The system developed in this thesis is Web-based. That means, there is a \emph{client}, a Web browser, and a remote Web \emph{server} with a database and a middleware. The Web browser hosts the applications user interface. If the user interacts with a tool the client sends a request to the Web server for new data. The middleware checks the request and queries the necessary data from the database. The data will be transformed and sendt back to the client. On the map and the timeline the new information will be shown.

This clear separation between the data (\emph{model}), the user interface (\emph{view}) and the middleware (\emph{controller}) follows directly from the \emph{model-view-controller pattern}: One part can be changed without interfering the other parts, e.g. if the 2D map is replaced by a 3D globe, only the view changes, but the middleware and the database can stay untouched. Likewise, the implementation of a new database technology has no consequences to the view.

% subsection system_architecture (end)


% ------------------------------------------------------------------------------
\subsection{Data Input} % (fold)
\label{sub:input}

This HGIS needs data about historical countries, their names and borders and historical events that lead to historical changes of these countries. There are a lot of free and open sources for geographic data about the current countries, their names and borders. One of the most exhaustive collections of geographic data in public domain is hosted by Natural Earth
\footnote{
  \textit{Natural Earth},
  URL: \url{http://www.naturalearthdata.com/downloads/},
  last access: 30.10.2015
}.
There is physical data (e.g. coastlines, rivers, or glacier areas) and cultural data (e.g. political borders, cities, roads, airports or timezones). OpenStreetMap also opens its database to the public
\footnote{
  \textit{Planet OSM},
  URL: \url{http://planet.openstreetmap.org/},
  last access: 30.10.2015
}.

However, data about historical countries and events are not as straightforward to aquire, because of the mostly qualitative nature of historical research (see section \ref{sub:history}). The most exhaustive free and open source of historical is the \emph{Wikipedia} and their article categories, e.g. \texttt{armistices} or \texttt{treaties}
\footnote{
  \textit{Category:Treaties},
  Wikipedia, the free encyclopedia,\\
  URL: \url{https://en.wikipedia.org/wiki/Category:Treaties},
  last access: 13.05.2016
}.
All sorts of historical events can be found, even translated into different languages. Some information is structured in information boxes, e.g. some historical treaties have a name, an image, a location, a signature and an effect date, an overview about treaty conditions and signatories. Particularily interesting for this thesis are articles about historical countries
\footnote{
  \textit{List of former sovereign states},
  Wikipedia, the free encyclopedia,
  URL: \url{https://en.wikipedia.org/wiki/List_of_former_sovereign_states},
  last access: 13.05.2016
},
because they contain the name of the country and meta information, e.g. their historical successors and predecessors. Building an open-source Historical Geographic Information System on the basis of Wikipedia would be a huge project with significant impact on the world of free and open education --- however, it would also be a big challenge: Wikipedia is incomplete, not all historical countries and events necessary to model the history of the world are available. It is also inconsistent, because not all articles about historical countries and events are structured, especially not to those who actually have an influence on a territorial change of a country, e.g. a border agreement. Retrieving, parsing and processing this information is a big challenge. Also the problem of accuracy and quality of information in the Wikipedia due to their open source nature has to be considered. Overall, using the Wikipedia as a data source for this thesis is not feasible, but is subject to further research.

% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\paragraph{Historical maps} % (fold)
\label{par:historical_map}

The most problematic data to acquire is about the territories and borders of historical countries. There is no primary data source for that, so the only way to retrieve a border is to extract it from an historical map.

They also can be found on Wikipedia, or in historical map colletions, e.g. \emph{OldMapsOnline}. The project is developed ``out of a love of history and heritage of old maps'' and currently stores about 400000 historical maps
\footnote{
  \textit{Old Maps Online},
  URL: \url{http://www.oldmapsonline.org/},
  last access: 13.05.2016
}.
There are five steps to retrieve a border with points in geographic coordinates from an historical map.
\begin{enumerate}
  \item \textbf{Digitization}: If the map is on paper, it has to be scanned in the best possible quality. The result is a raster graphic.
  \item \textbf{Georeferencing}: The historical map has to fit as good possible on the reference map. This requires to manually define a set of reference points which are used to transform the map into the geographic coordinate system. This process is error-prone, especially if the projection of the historical map is not known and the map itself is not accurate
  \cite[pp. xvii]{knowles2002past}.
  The outcome is a raster graphic in which each pixel is assigned a geographic coordinate.
  \item \textbf{Preprocessing}: The raster image has to be be processed so that the desired border stands out and can be traced in the next step. This happens via greyscale conversion, thresholding or the Canny Edge Detector. This results in a monochrome graphic in which the desired border must be uninterrupted and clearly be seen.
  \item \textbf{Line detection}: By selecting a start and an end point of the border, the line gets traced automatically. This step vectorizes one particular feature, a borderline, from the raster graphic and produces a polyline in geographic coordinates.
  \item \textbf{Postprocessing}: In the last step, the polyline can be adapted: The line can be simplified to reduce unnatural artifacts and the position of border points can be manually edited. The final output of the whole process is a polyline whose points are expressed in the geographic coordinate system which can be used in the system as a border of an historic country.
\end{enumerate}

This process was developed in a preceding \emph{HiBo} project
\footnotetext{
  \textit{HiBo - semi-automatic extraction of borders from historical maps},
  Project of: B. Weber, N. K. Dankwa, K. Singh and T. Kashyappan, supervised by: Prof. Volker Rodehorst and Marcus Kossatz, Bauhaus-Universität Weimar, February 2015,
  URL: \url{https://bitbucket.org/bastian_weber/hibo},
  last access: 29.10.2015
}
(see figure \ref{fig:hibo}).

\begin{figure}[ht]
  \centering
  \begin{subfigure}{0.48\textwidth}
    \centering
    \includegraphics[width=0.95\linewidth]{graphics/basics/hibo1.png}
    \caption{Georeferencing}
  \end{subfigure}
  \begin{subfigure}{0.48\textwidth}
    \centering
    \includegraphics[width=0.95\linewidth]{graphics/basics/hibo2.png}
    \caption{Semi-automatic digitizing}
  \end{subfigure}
  \caption{Semi-automatic extraction of a border from a map of the Roman Empire \protect\footnotemark}
  \label{fig:hibo}
\end{figure}

% paragraph historical_map (end)


% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\paragraph{Manual data input} % (fold)
\label{par:manual_data_input}

For the domain of this HGIS, the development of countries over time, there is no complete dataset available. Therefore, the system developed in this thesis needs to have an interface to enter historical data. The user needs to have an interface to enter information about historical events that change territories and names of historical countries. This data has to be acuired either from primary historical sources directly, or from free online sources. Next to Wikipedia, there are other collections of historical events, e.g. \emph{Correlates of War}
\footnote{
  \textit{Data Sets},
  Correlates of War,
  URL: \url{http://www.correlatesofwar.org/data-sets/folder_listing},
  last access: 13.05.2016
}
for quantitative data about international relations.
% paragraph manual_data_input (end)

% subsection data_input (end)



% ------------------------------------------------------------------------------
\subsection{Edit Mode} % (fold)
\label{sub:edit_mode}


user operations     CRE     UNI          SEP         TCH         NCH      DES
                     |      / \         /   \        /  \       /   \      |
HG operations       CRE   UNI   INC   SEP   SEC   TCH   BCH   NCH   ICH   DES

area changes        ADD   DEL*  DEL*  DEL   TCH   TCH   TCH   NCH   ADD   DEL
ADD, TCH, NCH, DES        ADD   TCH   ADD*  NCH?        TCH         DEL
                                NCH?        ADD*


geometries must be edited



% subsection edit_mode (end)

% ------------------------------------------------------------------------------
\subsection{HistoGraph} % (fold)
\label{sub:histograph}

% subsection histograph (end)

% section histoglobe (end)



% chapter concept (end)